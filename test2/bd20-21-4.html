<!DOCTYPE html>
<html>
    <head>
        <title>超时方法</title>
        <meta charset="utf-8">
        <style>
            
        </style>
    </head>
    <body>
        <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
        <button id="fade-btn">淡出</button>
        
    </body>
    <script>
        const btn = document.querySelector('button');
        const div = document.querySelector('div');
        let flag = 1;
        let opacity = 1;
        btn.onclick = faded;
        function faded() {
            
            if (flag == 1) {
                if (opacity >= 0) {
                    div.style.opacity = opacity;
                    opacity -= 0.01;
                    i = window.setTimeout(faded,30);
                    btn.disabled = true;
                }
                else{
                    console.log(div.style.opacity);
                    btn.textContent = '淡入';
                    btn.disabled = false;
                    flag = 0;
                }
            }
            else{
                if (opacity <= 1) {
                    div.style.opacity = opacity;
                    opacity += 0.01;
                    i = window.setTimeout(faded,30);
                    btn.disabled = true;
                }
                else{
                    console.log(div.style.opacity);
                    btn.textContent = '淡出';
                    btn.disabled = false;
                    flag = 1;
                }
            }
            
        }
    </script>
</html>